<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="../../syntax_highlight.css" type="text/css" charset="utf-8" />

    <script src="../../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../app.js" type="text/javascript" charset="utf-8"></script>
    <title>Module: Neo4j::NodeMixin::ClassMethods</title>
  </head>
  <body>
    <div id="content">
      <div class="section module Neo4j_NodeMixin_ClassMethods">
  <h1 class="title">Module: Neo4j::NodeMixin::ClassMethods</h1>
  <div class="section docstring">
  <hr size="10"></hr><p>
NodeMixin class methods
</p>

</div><div class="section constants">
  
</div>  <div class="section visibilitygroup public">
    <h1>Public Visibility</h1>
      <div class="section methodsummary instance public">
    <h1>Public Instance Method Summary</h1>
<table class="summary">
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#all-instance_method' title='#all'>#all</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns node instances of this class.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#create_value_class-instance_method' title='#create_value_class'>#create_value_class</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates a new value object class (a Struct) represeting this class.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#find-instance_method' title='#find'>#find</a></span><span class='args'>(query=nil, &amp;block)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Finds all nodes of this type (and ancestors of this type) having the
specified property values.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#fire_event-instance_method' title='#fire_event'>#fire_event</a></span><span class='args'>(event)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="10"></hr><p>
Event index_updater.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#has_n-instance_method' title='#has_n'>#has_n</a></span><span class='args'>(rel_type)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Specifies a relationship between two node classes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#has_one-instance_method' title='#has_one'>#has_one</a></span><span class='args'>(rel_type)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Specifies a relationship between two node classes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#index-instance_method' title='#index'>#index</a></span><span class='args'>(*rel_type_props)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Index a property or a relationship.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#index_property-instance_method' title='#index_property'>#index_property</a></span><span class='args'>(prop)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:api: private.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#index_relation-instance_method' title='#index_relation'>#index_relation</a></span><span class='args'>(index_key, rel_type, prop)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:api: private.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#index_triggers-instance_method' title='#index_triggers'>#index_triggers</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:api: private.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#index_updaters-instance_method' title='#index_updaters'>#index_updaters</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:api: private.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#lucene_index-instance_method' title='#lucene_index'>#lucene_index</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:api: private.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#marshal%3F-instance_method' title='#marshal?'>#marshal?</a></span><span class='args'>(prop_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if the given property name should be marshalled.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#new_relation-instance_method' title='#new_relation'>#new_relation</a></span><span class='args'>(rel_name, internal_relation)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates a new relation.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#properties_info-instance_method' title='#properties_info'>#properties_info</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
:api: private.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#property-instance_method' title='#property'>#property</a></span><span class='args'>(*props)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <hr size="10"></hr><p>
Generates accessor method and sets configuration for Neo4j node properties.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#property%3F-instance_method' title='#property?'>#property?</a></span><span class='args'>(prop_name)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Returns true if the given property name has been defined with the class
method property or properties.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#relations_info-instance_method' title='#relations_info'>#relations_info</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Contains information of all relationships, name, type, and multiplicity.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#remove_index-instance_method' title='#remove_index'>#remove_index</a></span><span class='args'>(*keys)</span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Remote one or more specified indexes.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#root_class-instance_method' title='#root_class'>#root_class</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Access to class constants.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#update_index-instance_method' title='#update_index'>#update_index</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Traverse all nodes and update the lucene index.
</p>

        
      </td>
    </tr>
  
    <tr>
      <th class="signature">
        <span class='name'><a href='#value_object-instance_method' title='#value_object'>#value_object</a></span><span class='args'></span>
        <span class='block'></span>
        
      </th>
      <td class="docstring">
        <p>
Creates a struct class containig all properties of this class.
</p>

        
      </td>
    </tr>
  
</table>
  </div>
<div class="section methoddetails instance public">
  <h1>Public Instance Method Details</h1>
  
    <div class="method">
      <div class="method_header">
  <h3>all</h3>
</div><div id="all-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>all</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns node instances of this class.
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


624
625
626
627</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 624</span>

<span class='def def kw'>def</span> <span class='all identifier id'>all</span>
  <span class='ref identifier id'>ref</span> <span class='assign token'>=</span> <span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='instance identifier id'>instance</span><span class='dot token'>.</span><span class='ref_node identifier id'>ref_node</span>
  <span class='ref identifier id'>ref</span><span class='dot token'>.</span><span class='relations identifier id'>relations</span><span class='dot token'>.</span><span class='outgoing identifier id'>outgoing</span><span class='lparen token'>(</span><span class='root_class identifier id'>root_class</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>create_value_class</h3>
</div><div id="create_value_class-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>create_value_class</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new value object class (a Struct) represeting this class.
</p>
<p>
The struct will have the Ruby on Rails method: model_name and new_record?
so that it can be used for restful routing.
</p>
<p>
TODO: if the DynamicMixin is used it should return somthing more flexible
since we do not know which property a class has.
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 667</span>

<span class='def def kw'>def</span> <span class='create_value_class identifier id'>create_value_class</span>
<span class='comment val'># the name of the class we want to create</span>
<span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{self.to_s}ValueObject&quot;</span><span class='dot token'>.</span><span class='gsub identifier id'>gsub</span><span class='lparen token'>(</span><span class='string val'>&quot;::&quot;</span><span class='comma token'>,</span> <span class='string val'>'_'</span><span class='rparen token'>)</span>

<span class='comment val'># remove previous class if exists</span>
<span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
  <span class='remove_const identifier id'>remove_const</span> <span class='name identifier id'>name</span>
<span class='end end kw'>end</span> <span class='if if_mod kw'>if</span> <span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='const_defined? fid id'>const_defined?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>

<span class='comment val'># get the properties we want in the new class</span>
<span class='props identifier id'>props</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='properties_info identifier id'>properties_info</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='bitor op'>|</span> <span class='dstring node'>&quot;:#{k}&quot;</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>','</span><span class='rparen token'>)</span>
<span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='module_eval identifier id'>module_eval</span> <span class='dstring node'>%Q[class #{name} &lt; Struct.new(#{props}); end]</span>

<span class='comment val'># get reference to the new class</span>
<span class='clazz identifier id'>clazz</span> <span class='assign token'>=</span> <span class='Neo4j constant id'>Neo4j</span><span class='dot token'>.</span><span class='const_get identifier id'>const_get</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>

<span class='comment val'># make it more Ruby on Rails friendly - try adding model_name method</span>
<span class='if if kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='colon op'>:</span><span class='model_name identifier id'>model_name</span><span class='rparen token'>)</span>
  <span class='model identifier id'>model</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='model_name identifier id'>model_name</span><span class='dot token'>.</span><span class='clone identifier id'>clone</span>
  <span class='lparen token'>(</span><span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='clazz identifier id'>clazz</span><span class='semicolon token'>;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='instance_eval identifier id'>instance_eval</span> <span class='do do kw'>do</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='symbol val'>:model_name</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='model identifier id'>model</span><span class='rbrace token'>}</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>find</h3>
</div><div id="find-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>find</span><span class='args'>(query=nil, &amp;block)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Finds all nodes of this type (and ancestors of this type) having the
specified property values. See the lucene module for more information how
to do a query.
</p>
<h4>Example</h4>
<pre class="code">
  <span class='MyNode constant id'>MyNode</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'foo'</span><span class='comma token'>,</span> <span class='symbol val'>:company</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'bar'</span><span class='rparen token'>)</span>
</pre>
<p>
Or using a DSL query
</p>
<pre class="code">
  <span class='MyNode constant id'>MyNode</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lbrace token'>{</span><span class='lparen token'>(</span><span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='string val'>'foo'</span><span class='rparen token'>)</span> <span class='bitand op'>&amp;</span> <span class='lparen token'>(</span><span class='company identifier id'>company</span> <span class='eq op'>==</span> <span class='string val'>'bar'</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
</pre>
<h4>Returns</h4>
<p>
Neo4j::SearchResult
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


653
654
655</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 653</span>

<span class='def def kw'>def</span> <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='query identifier id'>query</span><span class='assign token'>=</span><span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='SearchResult constant id'>SearchResult</span><span class='dot token'>.</span><span class='new identifier id'>new</span> <span class='lucene_index identifier id'>lucene_index</span><span class='comma token'>,</span> <span class='query identifier id'>query</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>fire_event</h3>
</div><div id="fire_event-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>fire_event</span><span class='args'>(event)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr><p>
Event index_updater
</p>

</div><div class="section tags">
  <h2>Meta Tags</h2>
  
</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


367
368
369</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 367</span>

<span class='def def kw'>def</span> <span class='fire_event identifier id'>fire_event</span><span class='lparen token'>(</span><span class='event identifier id'>event</span><span class='rparen token'>)</span>
  <span class='index_triggers identifier id'>index_triggers</span><span class='dot token'>.</span><span class='each_value identifier id'>each_value</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='trigger identifier id'>trigger</span><span class='bitor op'>|</span> <span class='trigger identifier id'>trigger</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='event identifier id'>event</span><span class='dot token'>.</span><span class='node identifier id'>node</span><span class='comma token'>,</span> <span class='event identifier id'>event</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_n</h3>
</div><div id="has_n-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_n</span><span class='args'>(rel_type)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Specifies a relationship between two node classes.
</p>
<h4>Example</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Order constant id'>Order</span>
     <span class='has_n identifier id'>has_n</span><span class='lparen token'>(</span><span class='symbol val'>:order_lines</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to identifier id'>to</span><span class='lparen token'>(</span><span class='Product constant id'>Product</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='relation identifier id'>relation</span><span class='lparen token'>(</span><span class='OrderLine constant id'>OrderLine</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
</pre>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


612
613
614
615
616
617</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 612</span>

<span class='def def kw'>def</span> <span class='has_n identifier id'>has_n</span><span class='lparen token'>(</span><span class='rel_type identifier id'>rel_type</span><span class='rparen token'>)</span>
  <span class='module_eval identifier id'>module_eval</span><span class='lparen token'>(</span><span class='dstring node'>%Q{def #{rel_type}(&amp;block)
                  Relations::HasNRelations.new(self,'#{rel_type.to_s}', &amp;block)
              end}</span><span class='comma token'>,</span>  <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
  <span class='relations_info identifier id'>relations_info</span><span class='lbrack token'>[</span><span class='rel_type identifier id'>rel_type</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Relations constant id'>Relations</span><span class='colon2 op'>::</span><span class='RelationInfo constant id'>RelationInfo</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>has_one</h3>
</div><div id="has_one-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>has_one</span><span class='args'>(rel_type)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Specifies a relationship between two node classes.
</p>
<h4>Example</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Order constant id'>Order</span>
     <span class='has_one identifier id'>has_one</span><span class='lparen token'>(</span><span class='symbol val'>:customer</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='of_class identifier id'>of_class</span><span class='lparen token'>(</span><span class='Customer constant id'>Customer</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
</pre>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


588
589
590
591
592
593
594
595
596
597
598
599
600</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 588</span>

<span class='def def kw'>def</span> <span class='has_one identifier id'>has_one</span><span class='lparen token'>(</span><span class='rel_type identifier id'>rel_type</span><span class='rparen token'>)</span>

  <span class='module_eval identifier id'>module_eval</span><span class='lparen token'>(</span><span class='dstring node'>%Q{def #{rel_type}=(value)
                  r = Relations::HasNRelations.new(self,'#{rel_type.to_s}')
                  r &lt;&lt; value
              end}</span><span class='comma token'>,</span>  <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
  
  <span class='module_eval identifier id'>module_eval</span><span class='lparen token'>(</span><span class='dstring node'>%Q{def #{rel_type}
                  r = Relations::HasNRelations.new(self,'#{rel_type.to_s}')
                  r.to_a[0]
              end}</span><span class='comma token'>,</span>  <span class='__FILE__ __file__ kw'>__FILE__</span><span class='comma token'>,</span> <span class='__LINE__ __line__ kw'>__LINE__</span><span class='rparen token'>)</span>
  <span class='relations_info identifier id'>relations_info</span><span class='lbrack token'>[</span><span class='rel_type identifier id'>rel_type</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='Relations constant id'>Relations</span><span class='colon2 op'>::</span><span class='RelationInfo constant id'>RelationInfo</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>index</h3>
</div><div id="index-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>index</span><span class='args'>(*rel_type_props)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Index a property or a relationship. If the rel_prop arg contains a
&#8217;.&#8217; then it will index the relationship. For example
&quot;friends.name&quot; will index each node with property name in the
relationship friends. For example &quot;name&quot; will index the name
property of this NodeMixin class.
</p>
<h4>Example</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Person constant id'>Person</span>
    <span class='include identifier id'>include</span> <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='NodeMixin constant id'>NodeMixin</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:name</span>
    <span class='index identifier id'>index</span> <span class='symbol val'>:name</span>
  <span class='end end kw'>end</span>
</pre>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


499
500
501
502
503
504
505
506
507
508
509
510
511
512</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 499</span>

<span class='def def kw'>def</span> <span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='rel_type_props identifier id'>rel_type_props</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='rel_type_props identifier id'>rel_type_props</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='eq op'>==</span> <span class='integer val'>2</span> <span class='and and kw'>and</span> <span class='rel_type_props identifier id'>rel_type_props</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='rel_type_props identifier id'>rel_type_props</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span><span class='value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='idx identifier id'>idx</span> <span class='assign token'>=</span> <span class='rel_type_props identifier id'>rel_type_props</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
      <span class='lucene_index identifier id'>lucene_index</span><span class='dot token'>.</span><span class='field_infos identifier id'>field_infos</span><span class='lbrack token'>[</span><span class='idx identifier id'>idx</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
    <span class='end end kw'>end</span>
    <span class='rel_type_props identifier id'>rel_type_props</span> <span class='assign token'>=</span> <span class='rel_type_props identifier id'>rel_type_props</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>
  <span class='rel_type_props identifier id'>rel_type_props</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='rel_type_prop identifier id'>rel_type_prop</span><span class='bitor op'>|</span>
    <span class='rel_type identifier id'>rel_type</span><span class='comma token'>,</span> <span class='prop identifier id'>prop</span> <span class='assign token'>=</span> <span class='rel_type_prop identifier id'>rel_type_prop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'.'</span><span class='rparen token'>)</span>
    <span class='index_property identifier id'>index_property</span><span class='lparen token'>(</span><span class='rel_type identifier id'>rel_type</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='prop identifier id'>prop</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='index_relation identifier id'>index_relation</span><span class='lparen token'>(</span><span class='rel_type_prop identifier id'>rel_type_prop</span><span class='comma token'>,</span> <span class='rel_type identifier id'>rel_type</span><span class='comma token'>,</span> <span class='prop identifier id'>prop</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='prop identifier id'>prop</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>index_property</h3>
</div><div id="index_property-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>index_property</span><span class='args'>(prop)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


539
540
541
542
543
544
545
546
547
548
549</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 539</span>

<span class='def def kw'>def</span> <span class='index_property identifier id'>index_property</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
  <span class='updater identifier id'>updater</span> <span class='assign token'>=</span> <span class='lambda identifier id'>lambda</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='node identifier id'>node</span><span class='comma token'>,</span> <span class='doc identifier id'>doc</span><span class='bitor op'>|</span>
    <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='prop identifier id'>prop</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='index_updaters identifier id'>index_updaters</span><span class='lbrack token'>[</span><span class='prop identifier id'>prop</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='updater identifier id'>updater</span>
  
  <span class='trigger identifier id'>trigger</span> <span class='assign token'>=</span> <span class='lambda identifier id'>lambda</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='node identifier id'>node</span><span class='comma token'>,</span> <span class='event identifier id'>event</span><span class='bitor op'>|</span>
    <span class='node identifier id'>node</span><span class='dot token'>.</span><span class='reindex identifier id'>reindex</span> <span class='if if_mod kw'>if</span> <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='PropertyChangedEvent constant id'>PropertyChangedEvent</span><span class='dot token'>.</span><span class='trigger? fid id'>trigger?</span><span class='lparen token'>(</span><span class='event identifier id'>event</span><span class='comma token'>,</span> <span class='symbol val'>:property</span><span class='comma token'>,</span> <span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='index_triggers identifier id'>index_triggers</span><span class='lbrack token'>[</span><span class='prop identifier id'>prop</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='trigger identifier id'>trigger</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>index_relation</h3>
</div><div id="index_relation-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>index_relation</span><span class='args'>(index_key, rel_type, prop)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 553</span>

<span class='def def kw'>def</span> <span class='index_relation identifier id'>index_relation</span><span class='lparen token'>(</span><span class='index_key identifier id'>index_key</span><span class='comma token'>,</span> <span class='rel_type identifier id'>rel_type</span><span class='comma token'>,</span> <span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
  <span class='clazz identifier id'>clazz</span> <span class='assign token'>=</span> <span class='relations_info identifier id'>relations_info</span><span class='lbrack token'>[</span><span class='rel_type identifier id'>rel_type</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:class</span><span class='rbrack token'>]</span>
  
  <span class='type identifier id'>type</span> <span class='assign token'>=</span> <span class='relations_info identifier id'>relations_info</span><span class='lbrack token'>[</span><span class='rel_type identifier id'>rel_type</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:type</span><span class='rbrack token'>]</span>  <span class='comment val'># this or the other node we index ?</span>
  <span class='rel_type identifier id'>rel_type</span> <span class='assign token'>=</span> <span class='type identifier id'>type</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span> <span class='unless unless_mod kw'>unless</span> <span class='type identifier id'>type</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>

  <span class='comment val'># updater - called when index needs to be updated</span>
  <span class='updater identifier id'>updater</span> <span class='assign token'>=</span> <span class='lambda identifier id'>lambda</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='my_node identifier id'>my_node</span><span class='comma token'>,</span> <span class='doc identifier id'>doc</span><span class='bitor op'>|</span>
    <span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
    <span class='relations identifier id'>relations</span> <span class='assign token'>=</span> <span class='my_node identifier id'>my_node</span><span class='dot token'>.</span><span class='relations identifier id'>relations</span><span class='dot token'>.</span><span class='both identifier id'>both</span><span class='lparen token'>(</span><span class='rel_type identifier id'>rel_type</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='nodes identifier id'>nodes</span>
    <span class='relations identifier id'>relations</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='other_node identifier id'>other_node</span><span class='bitor op'>|</span> <span class='values identifier id'>values</span> <span class='lshft op'>&lt;&lt;</span> <span class='other_node identifier id'>other_node</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
    <span class='doc identifier id'>doc</span><span class='lbrack token'>[</span><span class='index_key identifier id'>index_key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='values identifier id'>values</span>
  <span class='end end kw'>end</span>
  <span class='index_updaters identifier id'>index_updaters</span><span class='lbrack token'>[</span><span class='index_key identifier id'>index_key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='updater identifier id'>updater</span>

  <span class='comment val'># trigger - knows if an index needs to be updated</span>
  <span class='trigger identifier id'>trigger</span> <span class='assign token'>=</span> <span class='lambda identifier id'>lambda</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='other_node identifier id'>other_node</span><span class='comma token'>,</span> <span class='event identifier id'>event</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='PropertyChangedEvent constant id'>PropertyChangedEvent</span><span class='dot token'>.</span><span class='trigger? fid id'>trigger?</span><span class='lparen token'>(</span><span class='event identifier id'>event</span><span class='comma token'>,</span> <span class='symbol val'>:property</span><span class='comma token'>,</span> <span class='prop identifier id'>prop</span><span class='rparen token'>)</span> <span class='or or kw'>or</span>
          <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='RelationshipEvent constant id'>RelationshipEvent</span><span class='dot token'>.</span><span class='trigger? fid id'>trigger?</span><span class='lparen token'>(</span><span class='event identifier id'>event</span><span class='rparen token'>)</span> <span class='or or kw'>or</span>
          <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='NodeLifecycleEvent constant id'>NodeLifecycleEvent</span><span class='dot token'>.</span><span class='trigger? fid id'>trigger?</span><span class='lparen token'>(</span><span class='event identifier id'>event</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
      <span class='relations identifier id'>relations</span> <span class='assign token'>=</span> <span class='other_node identifier id'>other_node</span><span class='dot token'>.</span><span class='relations identifier id'>relations</span><span class='dot token'>.</span><span class='both identifier id'>both</span><span class='lparen token'>(</span><span class='rel_type identifier id'>rel_type</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='nodes identifier id'>nodes</span>
      <span class='relations identifier id'>relations</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:reindex</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='clazz identifier id'>clazz</span><span class='dot token'>.</span><span class='index_triggers identifier id'>index_triggers</span><span class='lbrack token'>[</span><span class='index_key identifier id'>index_key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='trigger identifier id'>trigger</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>index_triggers</h3>
</div><div id="index_triggers-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>index_triggers</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


344
345
346</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 344</span>

<span class='def def kw'>def</span> <span class='index_triggers identifier id'>index_triggers</span>
  <span class='self self kw'>self</span><span class='colon2 op'>::</span><span class='INDEX_TRIGGERS constant id'>INDEX_TRIGGERS</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>index_updaters</h3>
</div><div id="index_updaters-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>index_updaters</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


339
340
341</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 339</span>

<span class='def def kw'>def</span> <span class='index_updaters identifier id'>index_updaters</span>
  <span class='self self kw'>self</span><span class='colon2 op'>::</span><span class='INDEX_UPDATERS constant id'>INDEX_UPDATERS</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>lucene_index</h3>
</div><div id="lucene_index-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>lucene_index</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


333
334
335</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 333</span>

<span class='def def kw'>def</span> <span class='lucene_index identifier id'>lucene_index</span>
  <span class='Lucene constant id'>Lucene</span><span class='colon2 op'>::</span><span class='Index constant id'>Index</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='colon2 op'>::</span><span class='LUCENE_INDEX_PATH constant id'>LUCENE_INDEX_PATH</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>marshal?</h3>
</div><div id="marshal%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>marshal?</span><span class='args'>(prop_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if the given property name should be marshalled. All
properties that has a type will be marshalled.
</p>
<h5>Example</h5>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='NodeMixin constant id'>NodeMixin</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:name</span>
    <span class='property identifier id'>property</span> <span class='symbol val'>:since</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Date constant id'>Date</span>
  <span class='end end kw'>end</span>
  <span class='Foo constant id'>Foo</span><span class='dot token'>.</span><span class='marshal? fid id'>marshal?</span><span class='lparen token'>(</span><span class='symbol val'>:since</span><span class='rparen token'>)</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='true true kw'>true</span>
  <span class='Foo constant id'>Foo</span><span class='dot token'>.</span><span class='marshal? fid id'>marshal?</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='rparen token'>)</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span>
</pre>
<h4>Returns</h4>
<p>
true if the property will be marshalled, false otherwise
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


450
451
452
453
454</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 450</span>

<span class='def def kw'>def</span> <span class='marshal? fid id'>marshal?</span><span class='lparen token'>(</span><span class='prop_name identifier id'>prop_name</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='prop_name identifier id'>prop_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='return return kw'>return</span> <span class='false false kw'>false</span> <span class='if if_mod kw'>if</span> <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='prop_name identifier id'>prop_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:type</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
  <span class='return return kw'>return</span> <span class='true true kw'>true</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>new_relation</h3>
</div><div id="new_relation-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>new_relation</span><span class='args'>(rel_name, internal_relation)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a new relation. The relation must be outgoing.
</p>
<p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


633
634
635</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 633</span>

<span class='def def kw'>def</span> <span class='new_relation identifier id'>new_relation</span><span class='lparen token'>(</span><span class='rel_name identifier id'>rel_name</span><span class='comma token'>,</span> <span class='internal_relation identifier id'>internal_relation</span><span class='rparen token'>)</span>
  <span class='relations_info identifier id'>relations_info</span><span class='lbrack token'>[</span><span class='rel_name identifier id'>rel_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:relation</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='internal_relation identifier id'>internal_relation</span><span class='rparen token'>)</span> <span class='comment val'># internal_relation is a java neo object</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>properties_info</h3>
</div><div id="properties_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>properties_info</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


357
358
359</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 357</span>

<span class='def def kw'>def</span> <span class='properties_info identifier id'>properties_info</span>
  <span class='self self kw'>self</span><span class='colon2 op'>::</span><span class='PROPERTIES_INFO constant id'>PROPERTIES_INFO</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>property</h3>
</div><div id="property-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>property</span><span class='args'>(*props)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <hr size="10"></hr><p>
Generates accessor method and sets configuration for Neo4j node properties.
The generated accessor is a simple wrapper around the #set_property and
#get_property methods.
</p>
<p>
If a property is set to nil the property will be removed.
</p>
<h4>Configuration</h4>
<p>
By setting the :type configuration parameter to &#8216;Object&#8217; makes
it possible to marshal any ruby object.
</p>
<p>
If no type is provided the only the native Neo4j property types are
allowed:
</p>
<ul>
<li>TrueClass, FalseClass

</li>
<li>String

</li>
<li>Fixnum

</li>
<li>Float

</li>
<li>Boolean

</li>
</ul>
<h4>Parameters</h4>
<table>
<tr><td valign="top">props&lt;Array,Hash&gt;:</td><td>a variable length arguments or a hash, see example below

</td></tr>
</table>
<h4>Example</h4>
<pre class="code">
  <span class='class class kw'>class</span> <span class='Baaz constant id'>Baaz</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span>

  <span class='class class kw'>class</span> <span class='Foo constant id'>Foo</span>
    <span class='include identifier id'>include</span> <span class='Neo4j constant id'>Neo4j</span><span class='colon2 op'>::</span><span class='NodeMixin constant id'>NodeMixin</span>
    <span class='property identifier id'>property</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='city identifier id'>city</span> <span class='comment val'># can set several properties in one go</span>
    <span class='property identifier id'>property</span> <span class='bar identifier id'>bar</span><span class='comma token'>,</span> <span class='symbol val'>:type</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='Object constant id'>Object</span> <span class='comment val'># allow serialization of any ruby object</span>
  <span class='end end kw'>end</span>

  <span class='f identifier id'>f</span> <span class='assign token'>=</span> <span class='Foo constant id'>Foo</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
  <span class='f identifier id'>f</span><span class='dot token'>.</span><span class='bar identifier id'>bar</span> <span class='assign token'>=</span> <span class='Baaz constant id'>Baaz</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
</pre>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 408</span>

<span class='def def kw'>def</span> <span class='property identifier id'>property</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='props identifier id'>props</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='props identifier id'>props</span><span class='dot token'>.</span><span class='size identifier id'>size</span> <span class='eq op'>==</span> <span class='integer val'>2</span> <span class='and and kw'>and</span> <span class='props identifier id'>props</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
    <span class='props identifier id'>props</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span><span class='value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='pname identifier id'>pname</span> <span class='assign token'>=</span> <span class='props identifier id'>props</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
      <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='pname identifier id'>pname</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
      <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='pname identifier id'>pname</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='key identifier id'>key</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='value identifier id'>value</span>
    <span class='end end kw'>end</span>
    <span class='props identifier id'>props</span> <span class='assign token'>=</span> <span class='props identifier id'>props</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='dot2 op'>..</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
  <span class='end end kw'>end</span>

  <span class='props identifier id'>props</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span>
    <span class='pname identifier id'>pname</span> <span class='assign token'>=</span> <span class='prop identifier id'>prop</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
    <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='pname identifier id'>pname</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='pname identifier id'>pname</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:defined</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='pname identifier id'>pname</span><span class='rparen token'>)</span> <span class='do do kw'>do</span>
      <span class='get_property identifier id'>get_property</span><span class='lparen token'>(</span><span class='pname identifier id'>pname</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>

    <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='pname identifier id'>pname</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='lparen token'>(</span><span class='rparen token'>)</span> <span class='plus op'>+</span><span class='string val'>&quot;=&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
    <span class='define_method identifier id'>define_method</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='value identifier id'>value</span><span class='bitor op'>|</span>
      <span class='set_property identifier id'>set_property</span><span class='lparen token'>(</span><span class='pname identifier id'>pname</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>property?</h3>
</div><div id="property%3F-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>property?</span><span class='args'>(prop_name)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Returns true if the given property name has been defined with the class
method property or properties
</p>
<h4>Returns</h4>
<p>
true or false
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


464
465
466</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 464</span>

<span class='def def kw'>def</span> <span class='property? fid id'>property?</span><span class='lparen token'>(</span><span class='prop_name identifier id'>prop_name</span><span class='rparen token'>)</span>
  <span class='properties_info identifier id'>properties_info</span><span class='lbrack token'>[</span><span class='prop_name identifier id'>prop_name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:defined</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>relations_info</h3>
</div><div id="relations_info-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>relations_info</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Contains information of all relationships, name, type, and multiplicity
</p>
<p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


352
353
354</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 352</span>

<span class='def def kw'>def</span> <span class='relations_info identifier id'>relations_info</span>
  <span class='self self kw'>self</span><span class='colon2 op'>::</span><span class='RELATIONS_INFO constant id'>RELATIONS_INFO</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>remove_index</h3>
</div><div id="remove_index-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>remove_index</span><span class='args'>(*keys)</span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Remote one or more specified indexes. This indexes will not be updated
anymore, old indexes will still exist until the update_index method is
called.
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


520
521
522
523
524
525</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 520</span>

<span class='def def kw'>def</span> <span class='remove_index identifier id'>remove_index</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='keys identifier id'>keys</span><span class='rparen token'>)</span>
  <span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='bitor op'>|</span>
    <span class='index_updaters identifier id'>index_updaters</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='index_triggers identifier id'>index_triggers</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span> <span class='key identifier id'>key</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>root_class</h3>
</div><div id="root_class-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>root_class</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Access to class constants. These properties are shared by the class and its
siblings. For example that means that we can specify properties for a
parent class and the child classes will &#8216;inherit&#8217; those
properties.
</p>
<p>
:api: private
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


327
328
329</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 327</span>

<span class='def def kw'>def</span> <span class='root_class identifier id'>root_class</span>
  <span class='self self kw'>self</span><span class='colon2 op'>::</span><span class='ROOT_CLASS constant id'>ROOT_CLASS</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>update_index</h3>
</div><div id="update_index-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>update_index</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Traverse all nodes and update the lucene index. Can be used for example if
it is neccessarly to change the index on a class
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


532
533
534
535
536</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 532</span>

<span class='def def kw'>def</span> <span class='update_index identifier id'>update_index</span>
  <span class='all identifier id'>all</span><span class='dot token'>.</span><span class='nodes identifier id'>nodes</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='n identifier id'>n</span><span class='bitor op'>|</span>
    <span class='n identifier id'>n</span><span class='dot token'>.</span><span class='reindex! fid id'>reindex!</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
    <div class="method">
      <div class="method_header">
  <h3>value_object</h3>
</div><div id="value_object-instance_method" class="section method">
  <div class="details_title">
  <div class='section methodsignature'>
  <tt class='def'>
    <span class='visibility'>public</span>
    <span class='return_types'></span>
    <span class='name'>value_object</span><span class='args'></span>
    <span class='block'></span>
  </tt>
</div>

</div><div class="section docstring">
  <p>
Creates a struct class containig all properties of this class.
</p>
<h4>Example</h4>
<p>
h = Person.value_object.new h.name # =&gt; nil h.name=&#8217;kalle&#8217;
h[:name] # =&gt; &#8216;kalle&#8217;
</p>
<h4>Returns</h4>
<p>
Struct
</p>
<p>
:api: public
</p>

</div><div class="section source">
  <span>[<a class="source_link" href="#">View source</a>]</span>
  <div class="source_code">
    <table>
      <tr>
        <td>
          <pre class="lines">


482
483
484</pre>
        </td>
        <td>
          <pre class="code"><span class="info file"># File 'lib/neo4j/mixins/node.rb', line 482</span>

<span class='def def kw'>def</span> <span class='value_object identifier id'>value_object</span>
  <span class='@value_class ivar id'>@value_class</span> <span class='opasgn op'>||=</span> <span class='create_value_class identifier id'>create_value_class</span>
<span class='end end kw'>end</span>
</pre>
        </td>
      </tr>
    </table>
  </div>
</div>
</div>
    </div>
  
</div>
  </div>

</div>
    </div>
  </body>
</html>